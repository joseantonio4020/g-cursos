<div class="curso-form-container">
  <div class="card">
    <div class="card-body">
      <h2 class="card-title mb-4">
        <i class="bi" [ngClass]="isEditMode ? 'bi-pencil-square' : 'bi-plus-circle'"></i>
        {{ isEditMode ? 'Editar Curso' : 'Nuevo Curso' }}
      </h2>
      
      <div class="alert alert-success" *ngIf="successMessage">
        <i class="bi bi-check-circle"></i> {{ successMessage }}
      </div>
      
      <div class="alert alert-danger" *ngIf="errorMessage">
        <i class="bi bi-exclamation-triangle"></i> {{ errorMessage }}
      </div>
      
      <form [formGroup]="cursoForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <!-- Nombre -->
          <div class="col-md-6 mb-3">
            <label for="nombre" class="form-label">Nombre del Curso *</label>
            <input 
              type="text" 
              class="form-control" 
              id="nombre"
              formControlName="nombre"
              [class.is-invalid]="nombre?.invalid && nombre?.touched"
              placeholder="Ej: Desarrollo Web con Angular">
            
            <div class="invalid-feedback" *ngIf="nombre?.invalid && nombre?.touched">
              <span *ngIf="nombre?.errors?.['required']">El nombre es obligatorio.</span>
              <span *ngIf="nombre?.errors?.['minlength']">Mínimo 3 caracteres.</span>
            </div>
          </div>
          
          <!-- Instructor -->
          <div class="col-md-6 mb-3">
            <label for="instructor" class="form-label">Instructor *</label>
            <input 
              type="text" 
              class="form-control" 
              id="instructor"
              formControlName="instructor"
              [class.is-invalid]="instructor?.invalid && instructor?.touched"
              placeholder="Nombre del instructor">
            
            <div class="invalid-feedback" *ngIf="instructor?.invalid && instructor?.touched">
              <span *ngIf="instructor?.errors?.['required']">El instructor es obligatorio.</span>
            </div>
          </div>
          
          <!-- Descripción -->
          <div class="col-12 mb-3">
            <label for="descripcion" class="form-label">Descripción *</label>
            <textarea 
              class="form-control" 
              id="descripcion"
              formControlName="descripcion"
              [class.is-invalid]="descripcion?.invalid && descripcion?.touched"
              rows="3"
              placeholder="Describe el contenido del curso..."></textarea>
            
            <div class="invalid-feedback" *ngIf="descripcion?.invalid && descripcion?.touched">
              <span *ngIf="descripcion?.errors?.['required']">La descripción es obligatoria.</span>
              <span *ngIf="descripcion?.errors?.['minlength']">Mínimo 10 caracteres.</span>
            </div>
          </div>
          
          <!-- Categoría -->
          <div class="col-md-4 mb-3">
            <label for="categoria" class="form-label">Categoría *</label>
            <select 
              class="form-select" 
              id="categoria"
              formControlName="categoria"
              [class.is-invalid]="categoria?.invalid && categoria?.touched">
              <option value="">Seleccionar...</option>
              <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
            </select>
            
            <div class="invalid-feedback" *ngIf="categoria?.invalid && categoria?.touched">
              <span *ngIf="categoria?.errors?.['required']">La categoría es obligatoria.</span>
            </div>
          </div>
          
          <!-- Duración -->
          <div class="col-md-4 mb-3">
            <label for="duracion" class="form-label">Duración (horas) *</label>
            <input 
              type="number" 
              class="form-control" 
              id="duracion"
              formControlName="duracion"
              [class.is-invalid]="duracion?.invalid && duracion?.touched"
              placeholder="Ej: 40">
            
            <div class="invalid-feedback" *ngIf="duracion?.invalid && duracion?.touched">
              <span *ngIf="duracion?.errors?.['required']">La duración es obligatoria.</span>
              <span *ngIf="duracion?.errors?.['min']">Mínimo 1 hora.</span>
            </div>
          </div>
          
          <!-- Precio -->
          <div class="col-md-4 mb-3">
            <label for="precio" class="form-label">Precio (S/) *</label>
            <input 
              type="number" 
              class="form-control" 
              id="precio"
              formControlName="precio"
              [class.is-invalid]="precio?.invalid && precio?.touched"
              placeholder="Ej: 299.99">
            
            <div class="invalid-feedback" *ngIf="precio?.invalid && precio?.touched">
              <span *ngIf="precio?.errors?.['required']">El precio es obligatorio.</span>
              <span *ngIf="precio?.errors?.['min']">Mínimo 0.</span>
            </div>
          </div>
          
          <!-- Fecha Inicio -->
          <div class="col-md-4 mb-3">
            <label for="fechaInicio" class="form-label">Fecha de Inicio *</label>
            <input 
              type="date" 
              class="form-control" 
              id="fechaInicio"
              formControlName="fechaInicio"
              [class.is-invalid]="fechaInicio?.invalid && fechaInicio?.touched">
            
            <div class="invalid-feedback" *ngIf="fechaInicio?.invalid && fechaInicio?.touched">
              <span *ngIf="fechaInicio?.errors?.['required']">La fecha de inicio es obligatoria.</span>
            </div>
          </div>
          
          <!-- Fecha Fin -->
          <div class="col-md-4 mb-3">
            <label for="fechaFin" class="form-label">Fecha de Fin *</label>
            <input 
              type="date" 
              class="form-control" 
              id="fechaFin"
              formControlName="fechaFin"
              [class.is-invalid]="fechaFin?.invalid && fechaFin?.touched">
            
            <div class="invalid-feedback" *ngIf="fechaFin?.invalid && fechaFin?.touched">
              <span *ngIf="fechaFin?.errors?.['required']">La fecha de fin es obligatoria.</span>
            </div>
          </div>
          
          <!-- Estado -->
          <div class="col-md-4 mb-3">
            <label for="estado" class="form-label">Estado *</label>
            <select 
              class="form-select" 
              id="estado"
              formControlName="estado"
              [class.is-invalid]="estado?.invalid && estado?.touched">
              <option value="activo">Activo</option>
              <option value="finalizado">Finalizado</option>
              <option value="cancelado">Cancelado</option>
            </select>
            
            <div class="invalid-feedback" *ngIf="estado?.invalid && estado?.touched">
              <span *ngIf="estado?.errors?.['required']">El estado es obligatorio.</span>
            </div>
          </div>
          
          <!-- Estudiantes Inscritos -->
          <div class="col-md-12 mb-3" *ngIf="isEditMode">
            <label for="estudiantesInscritos" class="form-label">Estudiantes Inscritos</label>
            <input 
              type="number" 
              class="form-control" 
              id="estudiantesInscritos"
              formControlName="estudiantesInscritos"
              [class.is-invalid]="estudiantesInscritos?.invalid && estudiantesInscritos?.touched">
            
            <div class="invalid-feedback" *ngIf="estudiantesInscritos?.invalid && estudiantesInscritos?.touched">
              <span *ngIf="estudiantesInscritos?.errors?.['min']">Mínimo 0.</span>
            </div>
          </div>
        </div>
        
        <!-- Botones -->
        <div class="d-flex justify-content-end gap-2 mt-4">
          <a routerLink="/cursos" class="btn btn-secondary">
            <i class="bi bi-x-circle"></i> Cancelar
          </a>
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="loading">
            <span *ngIf="!loading">
              <i class="bi" [ngClass]="isEditMode ? 'bi-check-circle' : 'bi-plus-circle'"></i>
              {{ isEditMode ? 'Actualizar' : 'Crear' }}
            </span>
            <span *ngIf="loading">
              <span class="spinner-border spinner-border-sm me-2"></span>
              Guardando...
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>